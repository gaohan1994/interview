# 作用域

# 什么是作用域？

作用域是一套规则，用于确定在何处预计如何查找变量，如果查找的目的是对变量进行赋值
则会进行 LHS 查询，如果目的是获取变量的值，则会进行 RHS 查询。

赋值操作符会导致 LHS 查询。 =操作符 或者 调用函数时传入参数的操作都会导致关联作用域的赋值操作

# 什么是 LHS 和 RHS

- LHS 试图找到变量的容器本身，从而可以对其赋值
- RHS 则是取到它的源值

eg:
<script>
  funciton foo (a) {
    console.log(a)
  }

  foo(2);
</script>

1、foo(2) 对 foo 进行 RHS 查询
2、对形参 a 进行 LHS 查询
3、在 console.log(a) 中对 a 进行 RHS 查询

-- 

4、对 console.log 进行 RHS 查询
5、对 log 的参数 arg1 进行 LHS 查询

# 作用域嵌套

当一个快或者函数嵌套在另一个快或者函数中时，就会发生作用域的嵌套
在当前作用域无法找到某个变量时，引擎就会在外层嵌套的作用域中继续寻找
直到找到该变量或者抵达最外层的作用域（全局作用域）为止
当抵达最外层作用域时，无论找到还是没找到，查询过程都会停止

# 作用域异常

如果 RHS 查询所有嵌套的作用域中找不到所需的变量，则会抛出 `ReferenceError`
如果 LHS 查询所有嵌套的作用域中找不到目标变量
  - 非严格模式 创建一个要查找的名称的变量，并返回给引擎 （隐式创建）
  - 严格模式 抛出 `ReferenceError` 错误

eg
<script>
  function foo (a) {
    console.log(a + b);
    b = a;
  }

  foo(2);
</script>

